<html><head></head><body><div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a href="https://github.com/chjj/pty.js">pty.js (v0.3.1)</a>
</h1>
<h4>Pseudo terminals for node.</h4>
<div class="apidocSectionDiv"><a href="#apidoc.tableOfContents" id="apidoc.tableOfContents"><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.pty.js">module pty.js</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pty.js.js">
            function <span class="apidocSignatureSpan">pty.</span>js
            <span class="apidocSignatureSpan">(file, args, opt)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pty.js.Terminal">
            function <span class="apidocSignatureSpan">pty.js.</span>Terminal
            <span class="apidocSignatureSpan">(file, args, opt)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pty.js.createTerminal">
            function <span class="apidocSignatureSpan">pty.js.</span>createTerminal
            <span class="apidocSignatureSpan">(file, args, opt)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pty.js.fork">
            function <span class="apidocSignatureSpan">pty.js.</span>fork
            <span class="apidocSignatureSpan">(file, args, opt)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pty.js.js.Terminal">
            function <span class="apidocSignatureSpan">pty.js.</span>js.Terminal
            <span class="apidocSignatureSpan">(file, args, opt)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pty.js.js.pty_win">
            function <span class="apidocSignatureSpan">pty.js.</span>js.pty_win
            <span class="apidocSignatureSpan">(file, args, opt)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pty.js.open">
            function <span class="apidocSignatureSpan">pty.js.</span>open
            <span class="apidocSignatureSpan">(opt)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pty.js.spawn">
            function <span class="apidocSignatureSpan">pty.js.</span>spawn
            <span class="apidocSignatureSpan">(file, args, opt)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">pty.js.</span>total</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">pty.js.</span>js.Terminal.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">pty.js.</span>js.native</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">pty.js.</span>js.pty_win.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">pty.js.</span>native</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.pty.js.Terminal">module pty.js.Terminal</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pty.js.Terminal.Terminal">
            function <span class="apidocSignatureSpan">pty.js.</span>Terminal
            <span class="apidocSignatureSpan">(file, args, opt)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pty.js.Terminal.createTerminal">
            function <span class="apidocSignatureSpan">pty.js.Terminal.</span>createTerminal
            <span class="apidocSignatureSpan">(file, args, opt)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pty.js.Terminal.fork">
            function <span class="apidocSignatureSpan">pty.js.Terminal.</span>fork
            <span class="apidocSignatureSpan">(file, args, opt)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pty.js.Terminal.open">
            function <span class="apidocSignatureSpan">pty.js.Terminal.</span>open
            <span class="apidocSignatureSpan">(opt)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pty.js.Terminal.spawn">
            function <span class="apidocSignatureSpan">pty.js.Terminal.</span>spawn
            <span class="apidocSignatureSpan">(file, args, opt)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">pty.js.Terminal.</span>total</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">pty.js.Terminal.</span>native</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.pty.js.Terminal.prototype">module pty.js.Terminal.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pty.js.Terminal.prototype._close">
            function <span class="apidocSignatureSpan">pty.js.Terminal.prototype.</span>_close
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pty.js.Terminal.prototype.addListener">
            function <span class="apidocSignatureSpan">pty.js.Terminal.prototype.</span>addListener
            <span class="apidocSignatureSpan">(type, func)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pty.js.Terminal.prototype.destroy">
            function <span class="apidocSignatureSpan">pty.js.Terminal.prototype.</span>destroy
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pty.js.Terminal.prototype.emit">
            function <span class="apidocSignatureSpan">pty.js.Terminal.prototype.</span>emit
            <span class="apidocSignatureSpan">(evt)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pty.js.Terminal.prototype.end">
            function <span class="apidocSignatureSpan">pty.js.Terminal.prototype.</span>end
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pty.js.Terminal.prototype.kill">
            function <span class="apidocSignatureSpan">pty.js.Terminal.prototype.</span>kill
            <span class="apidocSignatureSpan">(sig)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pty.js.Terminal.prototype.listeners">
            function <span class="apidocSignatureSpan">pty.js.Terminal.prototype.</span>listeners
            <span class="apidocSignatureSpan">(type)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pty.js.Terminal.prototype.on">
            function <span class="apidocSignatureSpan">pty.js.Terminal.prototype.</span>on
            <span class="apidocSignatureSpan">(type, func)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pty.js.Terminal.prototype.once">
            function <span class="apidocSignatureSpan">pty.js.Terminal.prototype.</span>once
            <span class="apidocSignatureSpan">(type, func)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pty.js.Terminal.prototype.pause">
            function <span class="apidocSignatureSpan">pty.js.Terminal.prototype.</span>pause
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pty.js.Terminal.prototype.pipe">
            function <span class="apidocSignatureSpan">pty.js.Terminal.prototype.</span>pipe
            <span class="apidocSignatureSpan">(dest, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pty.js.Terminal.prototype.redraw">
            function <span class="apidocSignatureSpan">pty.js.Terminal.prototype.</span>redraw
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pty.js.Terminal.prototype.removeAllListeners">
            function <span class="apidocSignatureSpan">pty.js.Terminal.prototype.</span>removeAllListeners
            <span class="apidocSignatureSpan">(type)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pty.js.Terminal.prototype.removeListener">
            function <span class="apidocSignatureSpan">pty.js.Terminal.prototype.</span>removeListener
            <span class="apidocSignatureSpan">(type, func)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pty.js.Terminal.prototype.resize">
            function <span class="apidocSignatureSpan">pty.js.Terminal.prototype.</span>resize
            <span class="apidocSignatureSpan">(cols, rows)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pty.js.Terminal.prototype.resume">
            function <span class="apidocSignatureSpan">pty.js.Terminal.prototype.</span>resume
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pty.js.Terminal.prototype.setEncoding">
            function <span class="apidocSignatureSpan">pty.js.Terminal.prototype.</span>setEncoding
            <span class="apidocSignatureSpan">(enc)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pty.js.Terminal.prototype.write">
            function <span class="apidocSignatureSpan">pty.js.Terminal.prototype.</span>write
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">pty.js.Terminal.prototype.</span>stdin</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">pty.js.Terminal.prototype.</span>stdout</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.pty.js.native">module pty.js.native</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pty.js.native.fork">
            function <span class="apidocSignatureSpan">pty.js.native.</span>fork
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pty.js.native.open">
            function <span class="apidocSignatureSpan">pty.js.native.</span>open
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pty.js.native.process">
            function <span class="apidocSignatureSpan">pty.js.native.</span>process
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pty.js.native.resize">
            function <span class="apidocSignatureSpan">pty.js.native.</span>resize
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.pty.js.pty_win">module pty.js.pty_win</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pty.js.pty_win.pty_win">
            function <span class="apidocSignatureSpan">pty.js.</span>pty_win
            <span class="apidocSignatureSpan">(file, args, opt)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pty.js.pty_win.Terminal">
            function <span class="apidocSignatureSpan">pty.js.pty_win.</span>Terminal
            <span class="apidocSignatureSpan">(file, args, opt)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pty.js.pty_win.createTerminal">
            function <span class="apidocSignatureSpan">pty.js.pty_win.</span>createTerminal
            <span class="apidocSignatureSpan">(file, args, opt)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pty.js.pty_win.fork">
            function <span class="apidocSignatureSpan">pty.js.pty_win.</span>fork
            <span class="apidocSignatureSpan">(file, args, opt)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pty.js.pty_win.open">
            function <span class="apidocSignatureSpan">pty.js.pty_win.</span>open
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pty.js.pty_win.spawn">
            function <span class="apidocSignatureSpan">pty.js.pty_win.</span>spawn
            <span class="apidocSignatureSpan">(file, args, opt)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pty.js.pty_win.super_">
            function <span class="apidocSignatureSpan">pty.js.pty_win.</span>super_
            <span class="apidocSignatureSpan">(file, args, opt)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">pty.js.pty_win.</span>total</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">pty.js.pty_win.</span>native</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.pty.js.pty_win.prototype">module pty.js.pty_win.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pty.js.pty_win.prototype.destroy">
            function <span class="apidocSignatureSpan">pty.js.pty_win.prototype.</span>destroy
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pty.js.pty_win.prototype.kill">
            function <span class="apidocSignatureSpan">pty.js.pty_win.prototype.</span>kill
            <span class="apidocSignatureSpan">(sig)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pty.js.pty_win.prototype.resize">
            function <span class="apidocSignatureSpan">pty.js.pty_win.prototype.</span>resize
            <span class="apidocSignatureSpan">(cols, rows)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.pty.js.pty_win.prototype.write">
            function <span class="apidocSignatureSpan">pty.js.pty_win.prototype.</span>write
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">undefined <span class="apidocSignatureSpan">pty.js.pty_win.prototype.</span>process</span>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.pty.js" id="apidoc.module.pty.js">module pty.js</a></h1>


    <h2>
        <a href="#apidoc.element.pty.js.js" id="apidoc.element.pty.js.js">
        function <span class="apidocSignatureSpan">pty.</span>js
        <span class="apidocSignatureSpan">(file, args, opt)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Terminal(file, args, opt) {
  if (!(this instanceof Terminal)) {
    return new Terminal(file, args, opt);
  }

  var self = this
    , env
    , cwd
    , name
    , cols
    , rows
    , uid
    , gid
    , term;

  // backward compatibility
  if (typeof args === 'string') {
    opt = {
      name: arguments[1],
      cols: arguments[2],
      rows: arguments[3],
      cwd: process.env.HOME
    };
    args = [];
  }

  // for 'close'
  this._internalee = new EventEmitter;

  // arguments
  args = args || [];
  file = file || 'sh';
  opt = opt || {};

  cols = opt.cols || 80;
  rows = opt.rows || 24;

  uid = opt.uid != null ? opt.uid : -1;
  gid = opt.gid != null ? opt.gid : -1;

  opt.env = opt.env || process.env;
  env = extend({}, opt.env);

  if (opt.env === process.env) {
    // Make sure we didn't start our
    // server from inside tmux.
    delete env.TMUX;
    delete env.TMUX_PANE;

    // Make sure we didn't start
    // our server from inside screen.
    // http://web.mit.edu/gnu/doc/html/screen_20.html
    delete env.STY;
    delete env.WINDOW;

    // Delete some variables that
    // might confuse our terminal.
    delete env.WINDOWID;
    delete env.TERMCAP;
    delete env.COLUMNS;
    delete env.LINES;
  }

  // Could set some basic env vars
  // here, if they do not exist:
  // USER, SHELL, HOME, LOGNAME, WINDOWID

  cwd = opt.cwd || process.cwd();
  name = opt.name || env.TERM || 'xterm';
  env.TERM = name;
  // XXX Shouldn't be necessary:
  // env.LINES = rows + '';
  // env.COLUMNS = cols + '';

  env = environ(env);

  function onexit(code, signal) {
    // XXX Sometimes a data event is emitted
    // after exit. Wait til socket is destroyed.
    if (!self._emittedClose) {
      if (self._boundClose) return;
      self._boundClose = true;
      self.once('close', function() {
        self.emit('exit', code, signal);
      });
      return;
    }
    self.emit('exit', code, signal);
  }

  // fork
  term = pty.fork(file, args, env, cwd, cols, rows, uid, gid, onexit);

  this.socket = TTYStream(term.fd);
  this.socket.setEncoding('utf8');

  if (opt.resume !== false) {
    this.socket.resume();
  }

  // setup
  this.socket.on('error', function(err) {
    // NOTE: fs.ReadStream gets EAGAIN twice at first:
    if (err.code) {
      if (~err.code.indexOf('EAGAIN')) return;
    }

    // close
    self._close();
    // EIO on exit from fs.ReadStream:
    if (!self._emittedClose) {
      self._emittedClose = true;
      Terminal.total--;
      self.emit('close');
    }

    // EIO, happens when someone closes our child
    // process: the only process in the terminal.
    // node &lt; 0.6.14: errno 5
    // node &gt;= 0.6.14: read EIO
    if (err.code) {
      if (~err.code.indexOf('errno 5')
          || ~err.code.indexOf('EIO')) return;
    }

    // throw anything else
    if (self.listeners('error').length &lt; 2) {
      throw err;
    }
  });

  this.pid = term.pid;
  this.fd = term.fd;
  this.pty = term.pty;

  this.file = file;
  this.name = name;
  this.cols = cols;
  this.rows = rows;

  this.readable = true;
  this.writable = true;

  Terminal.total++;

  this.socket.on('close', function() {
    if (self._emittedClose) return;
    self._emittedClose = true;
    Terminal.total--;
    self._close();
    self.emit('close');
  });

  env = null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pty.js.Terminal" id="apidoc.element.pty.js.Terminal">
        function <span class="apidocSignatureSpan">pty.js.</span>Terminal
        <span class="apidocSignatureSpan">(file, args, opt)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Terminal(file, args, opt) {
  if (!(this instanceof Terminal)) {
    return new Terminal(file, args, opt);
  }

  var self = this
    , env
    , cwd
    , name
    , cols
    , rows
    , uid
    , gid
    , term;

  // backward compatibility
  if (typeof args === 'string') {
    opt = {
      name: arguments[1],
      cols: arguments[2],
      rows: arguments[3],
      cwd: process.env.HOME
    };
    args = [];
  }

  // for 'close'
  this._internalee = new EventEmitter;

  // arguments
  args = args || [];
  file = file || 'sh';
  opt = opt || {};

  cols = opt.cols || 80;
  rows = opt.rows || 24;

  uid = opt.uid != null ? opt.uid : -1;
  gid = opt.gid != null ? opt.gid : -1;

  opt.env = opt.env || process.env;
  env = extend({}, opt.env);

  if (opt.env === process.env) {
    // Make sure we didn't start our
    // server from inside tmux.
    delete env.TMUX;
    delete env.TMUX_PANE;

    // Make sure we didn't start
    // our server from inside screen.
    // http://web.mit.edu/gnu/doc/html/screen_20.html
    delete env.STY;
    delete env.WINDOW;

    // Delete some variables that
    // might confuse our terminal.
    delete env.WINDOWID;
    delete env.TERMCAP;
    delete env.COLUMNS;
    delete env.LINES;
  }

  // Could set some basic env vars
  // here, if they do not exist:
  // USER, SHELL, HOME, LOGNAME, WINDOWID

  cwd = opt.cwd || process.cwd();
  name = opt.name || env.TERM || 'xterm';
  env.TERM = name;
  // XXX Shouldn't be necessary:
  // env.LINES = rows + '';
  // env.COLUMNS = cols + '';

  env = environ(env);

  function onexit(code, signal) {
    // XXX Sometimes a data event is emitted
    // after exit. Wait til socket is destroyed.
    if (!self._emittedClose) {
      if (self._boundClose) return;
      self._boundClose = true;
      self.once('close', function() {
        self.emit('exit', code, signal);
      });
      return;
    }
    self.emit('exit', code, signal);
  }

  // fork
  term = pty.fork(file, args, env, cwd, cols, rows, uid, gid, onexit);

  this.socket = TTYStream(term.fd);
  this.socket.setEncoding('utf8');

  if (opt.resume !== false) {
    this.socket.resume();
  }

  // setup
  this.socket.on('error', function(err) {
    // NOTE: fs.ReadStream gets EAGAIN twice at first:
    if (err.code) {
      if (~err.code.indexOf('EAGAIN')) return;
    }

    // close
    self._close();
    // EIO on exit from fs.ReadStream:
    if (!self._emittedClose) {
      self._emittedClose = true;
      Terminal.total--;
      self.emit('close');
    }

    // EIO, happens when someone closes our child
    // process: the only process in the terminal.
    // node &lt; 0.6.14: errno 5
    // node &gt;= 0.6.14: read EIO
    if (err.code) {
      if (~err.code.indexOf('errno 5')
          || ~err.code.indexOf('EIO')) return;
    }

    // throw anything else
    if (self.listeners('error').length &lt; 2) {
      throw err;
    }
  });

  this.pid = term.pid;
  this.fd = term.fd;
  this.pty = term.pty;

  this.file = file;
  this.name = name;
  this.cols = cols;
  this.rows = rows;

  this.readable = true;
  this.writable = true;

  Terminal.total++;

  this.socket.on('close', function() {
    if (self._emittedClose) return;
    self._emittedClose = true;
    Terminal.total--;
    self._close();
    self.emit('close');
  });

  env = null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pty.js.createTerminal" id="apidoc.element.pty.js.createTerminal">
        function <span class="apidocSignatureSpan">pty.js.</span>createTerminal
        <span class="apidocSignatureSpan">(file, args, opt)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">createTerminal = function (file, args, opt) {
  return new Terminal(file, args, opt);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pty.js.fork" id="apidoc.element.pty.js.fork">
        function <span class="apidocSignatureSpan">pty.js.</span>fork
        <span class="apidocSignatureSpan">(file, args, opt)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fork = function (file, args, opt) {
  return new Terminal(file, args, opt);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    });
    return;
  }
  self.emit('exit', code, signal);
}

// fork
term = pty.<span class="apidocCodeKeywordSpan">fork</span>(file, args, env, cwd, cols, rows, uid, gid, onexit);

this.socket = TTYStream(term.fd);
this.socket.setEncoding('utf8');

if (opt.resume !== false) {
  this.socket.resume();
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pty.js.js.Terminal" id="apidoc.element.pty.js.js.Terminal">
        function <span class="apidocSignatureSpan">pty.js.</span>js.Terminal
        <span class="apidocSignatureSpan">(file, args, opt)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Terminal(file, args, opt) {
  if (!(this instanceof Terminal)) {
    return new Terminal(file, args, opt);
  }

  var self = this
    , env
    , cwd
    , name
    , cols
    , rows
    , uid
    , gid
    , term;

  // backward compatibility
  if (typeof args === 'string') {
    opt = {
      name: arguments[1],
      cols: arguments[2],
      rows: arguments[3],
      cwd: process.env.HOME
    };
    args = [];
  }

  // for 'close'
  this._internalee = new EventEmitter;

  // arguments
  args = args || [];
  file = file || 'sh';
  opt = opt || {};

  cols = opt.cols || 80;
  rows = opt.rows || 24;

  uid = opt.uid != null ? opt.uid : -1;
  gid = opt.gid != null ? opt.gid : -1;

  opt.env = opt.env || process.env;
  env = extend({}, opt.env);

  if (opt.env === process.env) {
    // Make sure we didn't start our
    // server from inside tmux.
    delete env.TMUX;
    delete env.TMUX_PANE;

    // Make sure we didn't start
    // our server from inside screen.
    // http://web.mit.edu/gnu/doc/html/screen_20.html
    delete env.STY;
    delete env.WINDOW;

    // Delete some variables that
    // might confuse our terminal.
    delete env.WINDOWID;
    delete env.TERMCAP;
    delete env.COLUMNS;
    delete env.LINES;
  }

  // Could set some basic env vars
  // here, if they do not exist:
  // USER, SHELL, HOME, LOGNAME, WINDOWID

  cwd = opt.cwd || process.cwd();
  name = opt.name || env.TERM || 'xterm';
  env.TERM = name;
  // XXX Shouldn't be necessary:
  // env.LINES = rows + '';
  // env.COLUMNS = cols + '';

  env = environ(env);

  function onexit(code, signal) {
    // XXX Sometimes a data event is emitted
    // after exit. Wait til socket is destroyed.
    if (!self._emittedClose) {
      if (self._boundClose) return;
      self._boundClose = true;
      self.once('close', function() {
        self.emit('exit', code, signal);
      });
      return;
    }
    self.emit('exit', code, signal);
  }

  // fork
  term = pty.fork(file, args, env, cwd, cols, rows, uid, gid, onexit);

  this.socket = TTYStream(term.fd);
  this.socket.setEncoding('utf8');

  if (opt.resume !== false) {
    this.socket.resume();
  }

  // setup
  this.socket.on('error', function(err) {
    // NOTE: fs.ReadStream gets EAGAIN twice at first:
    if (err.code) {
      if (~err.code.indexOf('EAGAIN')) return;
    }

    // close
    self._close();
    // EIO on exit from fs.ReadStream:
    if (!self._emittedClose) {
      self._emittedClose = true;
      Terminal.total--;
      self.emit('close');
    }

    // EIO, happens when someone closes our child
    // process: the only process in the terminal.
    // node &lt; 0.6.14: errno 5
    // node &gt;= 0.6.14: read EIO
    if (err.code) {
      if (~err.code.indexOf('errno 5')
          || ~err.code.indexOf('EIO')) return;
    }

    // throw anything else
    if (self.listeners('error').length &lt; 2) {
      throw err;
    }
  });

  this.pid = term.pid;
  this.fd = term.fd;
  this.pty = term.pty;

  this.file = file;
  this.name = name;
  this.cols = cols;
  this.rows = rows;

  this.readable = true;
  this.writable = true;

  Terminal.total++;

  this.socket.on('close', function() {
    if (self._emittedClose) return;
    self._emittedClose = true;
    Terminal.total--;
    self._close();
    self.emit('close');
  });

  env = null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pty.js.js.pty_win" id="apidoc.element.pty.js.js.pty_win">
        function <span class="apidocSignatureSpan">pty.js.</span>js.pty_win
        <span class="apidocSignatureSpan">(file, args, opt)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Terminal(file, args, opt) {

  var self = this,
      env, cwd, name, cols, rows, term, agent, debug;

  // Backward compatibility.
  if (typeof args === 'string') {
    opt = {
      name: arguments[1],
      cols: arguments[2],
      rows: arguments[3],
      cwd: process.env.HOME
    };
    args = [];
  }

  // Arguments.
  args = args || [];
  file = file || 'cmd.exe';
  opt = opt || {};

  env = extend({}, opt.env);

  cols = opt.cols || 80;
  rows = opt.rows || 30;
  cwd = opt.cwd || process.cwd();
  name = opt.name || env.TERM || 'Windows Shell';
  debug = opt.debug || false;

  env.TERM = name;

  // Initialize environment variables.
  env = environ(env);

  // If the terminal is ready
  this.isReady = false;

  // Functions that need to run after `ready` event is emitted.
  this.deferreds = [];

  // Create new termal.
  this.agent = new Agent(file, args, env, cwd, cols, rows, debug);

  // The dummy socket is used so that we can defer everything
  // until its available.
  this.socket = this.agent.ptySocket;

  // The terminal socket when its available
  this.dataPipe = null;

  // Not available until `ready` event emitted.
  this.pid = this.agent.pid;
  this.fd = this.agent.fd;
  this.pty = this.agent.pty;

  // The forked windows terminal is not available
  // until `ready` event is emitted.
  this.socket.on('ready_datapipe', function (socket) {

    // Set terminal socket
    self.dataPipe = socket;

    // These events needs to be forwarded.
    ['connect', 'data', 'end', 'timeout', 'drain'].forEach(function(event) {
      self.dataPipe.on(event, function(data) {

        // Wait until the first data event is fired
        // then we can run deferreds.
        if(!self.isReady &amp;&amp; event == 'data') {

          // Terminal is now ready and we can
          // avoid having to defer method calls.
          self.isReady = true;

          // Execute all deferred methods
          self.deferreds.forEach(function(fn) {
            // NB! In order to ensure that `this` has all
            // its references updated any variable that
            // need to be available in `this` before
            // the deferred is run has to be declared
            // above this forEach statement.
            fn.run();
          });

          // Reset
          self.deferreds = [];

        }

        // Emit to dummy socket
        self.socket.emit(event, data);

      });
    });

    // Resume socket.
    self.dataPipe.resume();

    // Shutdown if `error` event is emitted.
    self.dataPipe.on('error', function (err) {

      // Close terminal session.
      self._close();

      // EIO, happens when someone closes our child
      // process: the only process in the terminal.
      // node &lt; 0.6.14: errno 5
      // node &gt;= 0.6.14: read EIO
      if (err.code) {
        if (~err.code.indexOf('errno 5') || ~err.code.indexOf('EIO')) return;
      }

      // Throw anything else.
      if (self.listeners('error').length &lt; 2) {
        throw err;
      }

    });

    // Cleanup after the socket is closed.
    self.dataPipe.on('close', function () {
      Terminal.total--;
      self.emit('exit', null);
      self._close();
    });

  });

  this.file = file;
  this.name = name;
  this.cols = cols;
  this.rows = rows;

  this.readable = true;
  this.writable = true;

  Terminal.total++;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pty.js.open" id="apidoc.element.pty.js.open">
        function <span class="apidocSignatureSpan">pty.js.</span>open
        <span class="apidocSignatureSpan">(opt)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">open = function (opt) {
  var self = Object.create(Terminal.prototype)
    , opt = opt || {};

  if (arguments.length &gt; 1) {
    opt = {
      cols: arguments[1],
      rows: arguments[2]
    };
  }

  var cols = opt.cols || 80
    , rows = opt.rows || 24
    , term;

  // open
  term = pty.open(cols, rows);

  self.master = TTYStream(term.master);
  self.master.setEncoding('utf8');
  self.master.resume();

  self.slave = TTYStream(term.slave);
  self.slave.setEncoding('utf8');
  self.slave.resume();

  self.socket = self.master;
  self.pid = null;
  self.fd = term.master;
  self.pty = term.pty;

  self.file = process.argv[0] || 'node';
  self.name = process.env.TERM || '';
  self.cols = cols;
  self.rows = rows;

  self.readable = true;
  self.writable = true;

  self.socket.on('error', function(err) {
    Terminal.total--;
    self._close();
    if (self.listeners('error').length &lt; 2) {
      throw err;
    }
  });

  Terminal.total++;
  self.socket.on('close', function() {
    Terminal.total--;
    self._close();
  });

  return self;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

var cols = opt.cols || 80
  , rows = opt.rows || 24
  , term;

// open
term = pty.<span class="apidocCodeKeywordSpan">open</span>(cols, rows);

self.master = TTYStream(term.master);
self.master.setEncoding('utf8');
self.master.resume();

self.slave = TTYStream(term.slave);
self.slave.setEncoding('utf8');
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pty.js.spawn" id="apidoc.element.pty.js.spawn">
        function <span class="apidocSignatureSpan">pty.js.</span>spawn
        <span class="apidocSignatureSpan">(file, args, opt)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">spawn = function (file, args, opt) {
  return new Terminal(file, args, opt);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  you need a program to send you control sequences.

## Example Usage

``` js
var pty = require('pty.js');

var term = pty.<span class="apidocCodeKeywordSpan">spawn</span>('bash', [], {
  name: 'xterm-color',
  cols: 80,
  rows: 30,
  cwd: process.env.HOME,
  env: process.env
});
...</pre></li>
    </ul>












</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.pty.js.Terminal" id="apidoc.module.pty.js.Terminal">module pty.js.Terminal</a></h1>


    <h2>
        <a href="#apidoc.element.pty.js.Terminal.Terminal" id="apidoc.element.pty.js.Terminal.Terminal">
        function <span class="apidocSignatureSpan">pty.js.</span>Terminal
        <span class="apidocSignatureSpan">(file, args, opt)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Terminal(file, args, opt) {
  if (!(this instanceof Terminal)) {
    return new Terminal(file, args, opt);
  }

  var self = this
    , env
    , cwd
    , name
    , cols
    , rows
    , uid
    , gid
    , term;

  // backward compatibility
  if (typeof args === 'string') {
    opt = {
      name: arguments[1],
      cols: arguments[2],
      rows: arguments[3],
      cwd: process.env.HOME
    };
    args = [];
  }

  // for 'close'
  this._internalee = new EventEmitter;

  // arguments
  args = args || [];
  file = file || 'sh';
  opt = opt || {};

  cols = opt.cols || 80;
  rows = opt.rows || 24;

  uid = opt.uid != null ? opt.uid : -1;
  gid = opt.gid != null ? opt.gid : -1;

  opt.env = opt.env || process.env;
  env = extend({}, opt.env);

  if (opt.env === process.env) {
    // Make sure we didn't start our
    // server from inside tmux.
    delete env.TMUX;
    delete env.TMUX_PANE;

    // Make sure we didn't start
    // our server from inside screen.
    // http://web.mit.edu/gnu/doc/html/screen_20.html
    delete env.STY;
    delete env.WINDOW;

    // Delete some variables that
    // might confuse our terminal.
    delete env.WINDOWID;
    delete env.TERMCAP;
    delete env.COLUMNS;
    delete env.LINES;
  }

  // Could set some basic env vars
  // here, if they do not exist:
  // USER, SHELL, HOME, LOGNAME, WINDOWID

  cwd = opt.cwd || process.cwd();
  name = opt.name || env.TERM || 'xterm';
  env.TERM = name;
  // XXX Shouldn't be necessary:
  // env.LINES = rows + '';
  // env.COLUMNS = cols + '';

  env = environ(env);

  function onexit(code, signal) {
    // XXX Sometimes a data event is emitted
    // after exit. Wait til socket is destroyed.
    if (!self._emittedClose) {
      if (self._boundClose) return;
      self._boundClose = true;
      self.once('close', function() {
        self.emit('exit', code, signal);
      });
      return;
    }
    self.emit('exit', code, signal);
  }

  // fork
  term = pty.fork(file, args, env, cwd, cols, rows, uid, gid, onexit);

  this.socket = TTYStream(term.fd);
  this.socket.setEncoding('utf8');

  if (opt.resume !== false) {
    this.socket.resume();
  }

  // setup
  this.socket.on('error', function(err) {
    // NOTE: fs.ReadStream gets EAGAIN twice at first:
    if (err.code) {
      if (~err.code.indexOf('EAGAIN')) return;
    }

    // close
    self._close();
    // EIO on exit from fs.ReadStream:
    if (!self._emittedClose) {
      self._emittedClose = true;
      Terminal.total--;
      self.emit('close');
    }

    // EIO, happens when someone closes our child
    // process: the only process in the terminal.
    // node &lt; 0.6.14: errno 5
    // node &gt;= 0.6.14: read EIO
    if (err.code) {
      if (~err.code.indexOf('errno 5')
          || ~err.code.indexOf('EIO')) return;
    }

    // throw anything else
    if (self.listeners('error').length &lt; 2) {
      throw err;
    }
  });

  this.pid = term.pid;
  this.fd = term.fd;
  this.pty = term.pty;

  this.file = file;
  this.name = name;
  this.cols = cols;
  this.rows = rows;

  this.readable = true;
  this.writable = true;

  Terminal.total++;

  this.socket.on('close', function() {
    if (self._emittedClose) return;
    self._emittedClose = true;
    Terminal.total--;
    self._close();
    self.emit('close');
  });

  env = null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pty.js.Terminal.createTerminal" id="apidoc.element.pty.js.Terminal.createTerminal">
        function <span class="apidocSignatureSpan">pty.js.Terminal.</span>createTerminal
        <span class="apidocSignatureSpan">(file, args, opt)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">createTerminal = function (file, args, opt) {
  return new Terminal(file, args, opt);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pty.js.Terminal.fork" id="apidoc.element.pty.js.Terminal.fork">
        function <span class="apidocSignatureSpan">pty.js.Terminal.</span>fork
        <span class="apidocSignatureSpan">(file, args, opt)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fork = function (file, args, opt) {
  return new Terminal(file, args, opt);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    });
    return;
  }
  self.emit('exit', code, signal);
}

// fork
term = pty.<span class="apidocCodeKeywordSpan">fork</span>(file, args, env, cwd, cols, rows, uid, gid, onexit);

this.socket = TTYStream(term.fd);
this.socket.setEncoding('utf8');

if (opt.resume !== false) {
  this.socket.resume();
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pty.js.Terminal.open" id="apidoc.element.pty.js.Terminal.open">
        function <span class="apidocSignatureSpan">pty.js.Terminal.</span>open
        <span class="apidocSignatureSpan">(opt)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">open = function (opt) {
  var self = Object.create(Terminal.prototype)
    , opt = opt || {};

  if (arguments.length &gt; 1) {
    opt = {
      cols: arguments[1],
      rows: arguments[2]
    };
  }

  var cols = opt.cols || 80
    , rows = opt.rows || 24
    , term;

  // open
  term = pty.open(cols, rows);

  self.master = TTYStream(term.master);
  self.master.setEncoding('utf8');
  self.master.resume();

  self.slave = TTYStream(term.slave);
  self.slave.setEncoding('utf8');
  self.slave.resume();

  self.socket = self.master;
  self.pid = null;
  self.fd = term.master;
  self.pty = term.pty;

  self.file = process.argv[0] || 'node';
  self.name = process.env.TERM || '';
  self.cols = cols;
  self.rows = rows;

  self.readable = true;
  self.writable = true;

  self.socket.on('error', function(err) {
    Terminal.total--;
    self._close();
    if (self.listeners('error').length &lt; 2) {
      throw err;
    }
  });

  Terminal.total++;
  self.socket.on('close', function() {
    Terminal.total--;
    self._close();
  });

  return self;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

var cols = opt.cols || 80
  , rows = opt.rows || 24
  , term;

// open
term = pty.<span class="apidocCodeKeywordSpan">open</span>(cols, rows);

self.master = TTYStream(term.master);
self.master.setEncoding('utf8');
self.master.resume();

self.slave = TTYStream(term.slave);
self.slave.setEncoding('utf8');
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pty.js.Terminal.spawn" id="apidoc.element.pty.js.Terminal.spawn">
        function <span class="apidocSignatureSpan">pty.js.Terminal.</span>spawn
        <span class="apidocSignatureSpan">(file, args, opt)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">spawn = function (file, args, opt) {
  return new Terminal(file, args, opt);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  you need a program to send you control sequences.

## Example Usage

``` js
var pty = require('pty.js');

var term = pty.<span class="apidocCodeKeywordSpan">spawn</span>('bash', [], {
  name: 'xterm-color',
  cols: 80,
  rows: 30,
  cwd: process.env.HOME,
  env: process.env
});
...</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.pty.js.Terminal.prototype" id="apidoc.module.pty.js.Terminal.prototype">module pty.js.Terminal.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.pty.js.Terminal.prototype._close" id="apidoc.element.pty.js.Terminal.prototype._close">
        function <span class="apidocSignatureSpan">pty.js.Terminal.prototype.</span>_close
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_close = function () {
  this.socket.writable = false;
  this.socket.readable = false;
  this.write = function() {};
  this.end = function() {};
  this.writable = false;
  this.readable = false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  this.socket.on('error', function(err) {
// NOTE: fs.ReadStream gets EAGAIN twice at first:
if (err.code) {
  if (~err.code.indexOf('EAGAIN')) return;
}

// close
self.<span class="apidocCodeKeywordSpan">_close</span>();
// EIO on exit from fs.ReadStream:
if (!self._emittedClose) {
  self._emittedClose = true;
  Terminal.total--;
  self.emit('close');
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pty.js.Terminal.prototype.addListener" id="apidoc.element.pty.js.Terminal.prototype.addListener">
        function <span class="apidocSignatureSpan">pty.js.Terminal.prototype.</span>addListener
        <span class="apidocSignatureSpan">(type, func)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">addListener = function (type, func) {
  if (type === 'close') {
    this._internalee.on('close', func);
    return this;
  }
  this.socket.on(type, func);
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pty.js.Terminal.prototype.destroy" id="apidoc.element.pty.js.Terminal.prototype.destroy">
        function <span class="apidocSignatureSpan">pty.js.Terminal.prototype.</span>destroy
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">destroy = function () {
  var self = this;

  // close
  this._close();

  // Need to close the read stream so
  // node stops reading a dead file descriptor.
  // Then we can safely SIGHUP the shell.
  this.socket.once('close', function() {
    self.kill('SIGHUP');
  });

  this.socket.destroy();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// Need to close the read stream so
// node stops reading a dead file descriptor.
// Then we can safely SIGHUP the shell.
this.socket.once('close', function() {
  self.kill('SIGHUP');
});

this.socket.<span class="apidocCodeKeywordSpan">destroy</span>();
};

Terminal.prototype.kill = function(sig) {
try {
  process.kill(this.pid, sig || 'SIGHUP');
} catch(e) {
  ;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pty.js.Terminal.prototype.emit" id="apidoc.element.pty.js.Terminal.prototype.emit">
        function <span class="apidocSignatureSpan">pty.js.Terminal.prototype.</span>emit
        <span class="apidocSignatureSpan">(evt)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">emit = function (evt) {
  if (evt === 'close') {
    return this._internalee.emit.apply(this._internalee, arguments);
  }
  return this.socket.emit.apply(this.socket, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
function onexit(code, signal) {
  // XXX Sometimes a data event is emitted
  // after exit. Wait til socket is destroyed.
  if (!self._emittedClose) {
    if (self._boundClose) return;
    self._boundClose = true;
    self.once('close', function() {
      self.<span class="apidocCodeKeywordSpan">emit</span>('exit', code, signal);
    });
    return;
  }
  self.emit('exit', code, signal);
}

// fork
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pty.js.Terminal.prototype.end" id="apidoc.element.pty.js.Terminal.prototype.end">
        function <span class="apidocSignatureSpan">pty.js.Terminal.prototype.</span>end
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">end = function (data) {
  return this.socket.end(data);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 */

Terminal.prototype.write = function(data) {
  return this.socket.write(data);
};

Terminal.prototype.end = function(data) {
  return this.socket.<span class="apidocCodeKeywordSpan">end</span>(data);
};

Terminal.prototype.pipe = function(dest, options) {
  return this.socket.pipe(dest, options);
};

Terminal.prototype.pause = function() {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pty.js.Terminal.prototype.kill" id="apidoc.element.pty.js.Terminal.prototype.kill">
        function <span class="apidocSignatureSpan">pty.js.Terminal.prototype.</span>kill
        <span class="apidocSignatureSpan">(sig)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">kill = function (sig) {
  try {
    process.kill(this.pid, sig || 'SIGHUP');
  } catch(e) {
    ;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// close
this._close();

// Need to close the read stream so
// node stops reading a dead file descriptor.
// Then we can safely SIGHUP the shell.
this.socket.once('close', function() {
  self.<span class="apidocCodeKeywordSpan">kill</span>('SIGHUP');
});

this.socket.destroy();
};

Terminal.prototype.kill = function(sig) {
try {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pty.js.Terminal.prototype.listeners" id="apidoc.element.pty.js.Terminal.prototype.listeners">
        function <span class="apidocSignatureSpan">pty.js.Terminal.prototype.</span>listeners
        <span class="apidocSignatureSpan">(type)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">listeners = function (type) {
  return this.socket.listeners(type);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  // node &gt;= 0.6.14: read EIO
  if (err.code) {
    if (~err.code.indexOf('errno 5')
        || ~err.code.indexOf('EIO')) return;
  }

  // throw anything else
  if (self.<span class="apidocCodeKeywordSpan">listeners</span>('error').length &lt; 2) {
    throw err;
  }
});

this.pid = term.pid;
this.fd = term.fd;
this.pty = term.pty;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pty.js.Terminal.prototype.on" id="apidoc.element.pty.js.Terminal.prototype.on">
        function <span class="apidocSignatureSpan">pty.js.Terminal.prototype.</span>on
        <span class="apidocSignatureSpan">(type, func)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">on = function (type, func) {
  if (type === 'close') {
    this._internalee.on('close', func);
    return this;
  }
  this.socket.on(type, func);
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  name: 'xterm-color',
  cols: 80,
  rows: 30,
  cwd: process.env.HOME,
  env: process.env
});

term.<span class="apidocCodeKeywordSpan">on</span>('data', function(data) {
  console.log(data);
});

term.write('ls\r');
term.resize(100, 40);
term.write('ls /\r');
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pty.js.Terminal.prototype.once" id="apidoc.element.pty.js.Terminal.prototype.once">
        function <span class="apidocSignatureSpan">pty.js.Terminal.prototype.</span>once
        <span class="apidocSignatureSpan">(type, func)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">once = function (type, func) {
  this.socket.once(type, func);
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

function onexit(code, signal) {
  // XXX Sometimes a data event is emitted
  // after exit. Wait til socket is destroyed.
  if (!self._emittedClose) {
    if (self._boundClose) return;
    self._boundClose = true;
    self.<span class="apidocCodeKeywordSpan">once</span>('close', function() {
      self.emit('exit', code, signal);
    });
    return;
  }
  self.emit('exit', code, signal);
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pty.js.Terminal.prototype.pause" id="apidoc.element.pty.js.Terminal.prototype.pause">
        function <span class="apidocSignatureSpan">pty.js.Terminal.prototype.</span>pause
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">pause = function () {
  return this.socket.pause();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

Terminal.prototype.pipe = function(dest, options) {
  return this.socket.pipe(dest, options);
};

Terminal.prototype.pause = function() {
  return this.socket.<span class="apidocCodeKeywordSpan">pause</span>();
};

Terminal.prototype.resume = function() {
  return this.socket.resume();
};

Terminal.prototype.setEncoding = function(enc) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pty.js.Terminal.prototype.pipe" id="apidoc.element.pty.js.Terminal.prototype.pipe">
        function <span class="apidocSignatureSpan">pty.js.Terminal.prototype.</span>pipe
        <span class="apidocSignatureSpan">(dest, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">pipe = function (dest, options) {
  return this.socket.pipe(dest, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

Terminal.prototype.end = function(data) {
  return this.socket.end(data);
};

Terminal.prototype.pipe = function(dest, options) {
  return this.socket.<span class="apidocCodeKeywordSpan">pipe</span>(dest, options);
};

Terminal.prototype.pause = function() {
  return this.socket.pause();
};

Terminal.prototype.resume = function() {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pty.js.Terminal.prototype.redraw" id="apidoc.element.pty.js.Terminal.prototype.redraw">
        function <span class="apidocSignatureSpan">pty.js.Terminal.prototype.</span>redraw
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">redraw = function () {
  var self = this
    , cols = this.cols
    , rows = this.rows;

  // We could just send SIGWINCH, but most programs will
  // ignore it if the size hasn't actually changed.

  this.resize(cols + 1, rows + 1);

  setTimeout(function() {
    self.resize(cols, rows);
  }, 30);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pty.js.Terminal.prototype.removeAllListeners" id="apidoc.element.pty.js.Terminal.prototype.removeAllListeners">
        function <span class="apidocSignatureSpan">pty.js.Terminal.prototype.</span>removeAllListeners
        <span class="apidocSignatureSpan">(type)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">removeAllListeners = function (type) {
  this.socket.removeAllListeners(type);
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

Terminal.prototype.removeListener = function(type, func) {
  this.socket.removeListener(type, func);
  return this;
};

Terminal.prototype.removeAllListeners = function(type) {
  this.socket.<span class="apidocCodeKeywordSpan">removeAllListeners</span>(type);
  return this;
};

Terminal.prototype.once = function(type, func) {
  this.socket.once(type, func);
  return this;
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pty.js.Terminal.prototype.removeListener" id="apidoc.element.pty.js.Terminal.prototype.removeListener">
        function <span class="apidocSignatureSpan">pty.js.Terminal.prototype.</span>removeListener
        <span class="apidocSignatureSpan">(type, func)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">removeListener = function (type, func) {
  this.socket.removeListener(type, func);
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

Terminal.prototype.listeners = function(type) {
  return this.socket.listeners(type);
};

Terminal.prototype.removeListener = function(type, func) {
  this.socket.<span class="apidocCodeKeywordSpan">removeListener</span>(type, func);
  return this;
};

Terminal.prototype.removeAllListeners = function(type) {
  this.socket.removeAllListeners(type);
  return this;
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pty.js.Terminal.prototype.resize" id="apidoc.element.pty.js.Terminal.prototype.resize">
        function <span class="apidocSignatureSpan">pty.js.Terminal.prototype.</span>resize
        <span class="apidocSignatureSpan">(cols, rows)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">resize = function (cols, rows) {
  cols = cols || 80;
  rows = rows || 24;

  this.cols = cols;
  this.rows = rows;

  pty.resize(this.fd, cols, rows);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
});

term.on('data', function(data) {
  console.log(data);
});

term.write('ls\r');
term.<span class="apidocCodeKeywordSpan">resize</span>(100, 40);
term.write('ls /\r');

console.log(term.process);
```

## Todo
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pty.js.Terminal.prototype.resume" id="apidoc.element.pty.js.Terminal.prototype.resume">
        function <span class="apidocSignatureSpan">pty.js.Terminal.prototype.</span>resume
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">resume = function () {
  return this.socket.resume();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// fork
term = pty.fork(file, args, env, cwd, cols, rows, uid, gid, onexit);

this.socket = TTYStream(term.fd);
this.socket.setEncoding('utf8');

if (opt.resume !== false) {
  this.socket.<span class="apidocCodeKeywordSpan">resume</span>();
}

// setup
this.socket.on('error', function(err) {
  // NOTE: fs.ReadStream gets EAGAIN twice at first:
  if (err.code) {
    if (~err.code.indexOf('EAGAIN')) return;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pty.js.Terminal.prototype.setEncoding" id="apidoc.element.pty.js.Terminal.prototype.setEncoding">
        function <span class="apidocSignatureSpan">pty.js.Terminal.prototype.</span>setEncoding
        <span class="apidocSignatureSpan">(enc)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setEncoding = function (enc) {
  if (this.socket._decoder) {
    delete this.socket._decoder;
  }
  if (enc) {
    this.socket.setEncoding(enc);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  self.emit('exit', code, signal);
}

// fork
term = pty.fork(file, args, env, cwd, cols, rows, uid, gid, onexit);

this.socket = TTYStream(term.fd);
this.socket.<span class="apidocCodeKeywordSpan">setEncoding</span>('utf8');

if (opt.resume !== false) {
  this.socket.resume();
}

// setup
this.socket.on('error', function(err) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pty.js.Terminal.prototype.write" id="apidoc.element.pty.js.Terminal.prototype.write">
        function <span class="apidocSignatureSpan">pty.js.Terminal.prototype.</span>write
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">write = function (data) {
  return this.socket.write(data);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  env: process.env
});

term.on('data', function(data) {
  console.log(data);
});

term.<span class="apidocCodeKeywordSpan">write</span>('ls\r');
term.resize(100, 40);
term.write('ls /\r');

console.log(term.process);
```

## Todo
...</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.pty.js.native" id="apidoc.module.pty.js.native">module pty.js.native</a></h1>


    <h2>
        <a href="#apidoc.element.pty.js.native.fork" id="apidoc.element.pty.js.native.fork">
        function <span class="apidocSignatureSpan">pty.js.native.</span>fork
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fork = function () { [native code] }</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    });
    return;
  }
  self.emit('exit', code, signal);
}

// fork
term = pty.<span class="apidocCodeKeywordSpan">fork</span>(file, args, env, cwd, cols, rows, uid, gid, onexit);

this.socket = TTYStream(term.fd);
this.socket.setEncoding('utf8');

if (opt.resume !== false) {
  this.socket.resume();
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pty.js.native.open" id="apidoc.element.pty.js.native.open">
        function <span class="apidocSignatureSpan">pty.js.native.</span>open
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">open = function () { [native code] }</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

var cols = opt.cols || 80
  , rows = opt.rows || 24
  , term;

// open
term = pty.<span class="apidocCodeKeywordSpan">open</span>(cols, rows);

self.master = TTYStream(term.master);
self.master.setEncoding('utf8');
self.master.resume();

self.slave = TTYStream(term.slave);
self.slave.setEncoding('utf8');
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pty.js.native.process" id="apidoc.element.pty.js.native.process">
        function <span class="apidocSignatureSpan">pty.js.native.</span>process
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">process = function () { [native code] }</pre></li>
    <li>example usage<pre class="apidocCodePre">...

setTimeout(function() {
  self.resize(cols, rows);
}, 30);
};

Terminal.prototype.__defineGetter__('process', function() {
return pty.<span class="apidocCodeKeywordSpan">process</span>(this.fd, this.pty) || this.file;
});

Terminal.prototype._close = function() {
this.socket.writable = false;
this.socket.readable = false;
this.write = function() {};
this.end = function() {};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pty.js.native.resize" id="apidoc.element.pty.js.native.resize">
        function <span class="apidocSignatureSpan">pty.js.native.</span>resize
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">resize = function () { [native code] }</pre></li>
    <li>example usage<pre class="apidocCodePre">...
});

term.on('data', function(data) {
  console.log(data);
});

term.write('ls\r');
term.<span class="apidocCodeKeywordSpan">resize</span>(100, 40);
term.write('ls /\r');

console.log(term.process);
```

## Todo
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.pty.js.pty_win" id="apidoc.module.pty.js.pty_win">module pty.js.pty_win</a></h1>


    <h2>
        <a href="#apidoc.element.pty.js.pty_win.pty_win" id="apidoc.element.pty.js.pty_win.pty_win">
        function <span class="apidocSignatureSpan">pty.js.</span>pty_win
        <span class="apidocSignatureSpan">(file, args, opt)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Terminal(file, args, opt) {

  var self = this,
      env, cwd, name, cols, rows, term, agent, debug;

  // Backward compatibility.
  if (typeof args === 'string') {
    opt = {
      name: arguments[1],
      cols: arguments[2],
      rows: arguments[3],
      cwd: process.env.HOME
    };
    args = [];
  }

  // Arguments.
  args = args || [];
  file = file || 'cmd.exe';
  opt = opt || {};

  env = extend({}, opt.env);

  cols = opt.cols || 80;
  rows = opt.rows || 30;
  cwd = opt.cwd || process.cwd();
  name = opt.name || env.TERM || 'Windows Shell';
  debug = opt.debug || false;

  env.TERM = name;

  // Initialize environment variables.
  env = environ(env);

  // If the terminal is ready
  this.isReady = false;

  // Functions that need to run after `ready` event is emitted.
  this.deferreds = [];

  // Create new termal.
  this.agent = new Agent(file, args, env, cwd, cols, rows, debug);

  // The dummy socket is used so that we can defer everything
  // until its available.
  this.socket = this.agent.ptySocket;

  // The terminal socket when its available
  this.dataPipe = null;

  // Not available until `ready` event emitted.
  this.pid = this.agent.pid;
  this.fd = this.agent.fd;
  this.pty = this.agent.pty;

  // The forked windows terminal is not available
  // until `ready` event is emitted.
  this.socket.on('ready_datapipe', function (socket) {

    // Set terminal socket
    self.dataPipe = socket;

    // These events needs to be forwarded.
    ['connect', 'data', 'end', 'timeout', 'drain'].forEach(function(event) {
      self.dataPipe.on(event, function(data) {

        // Wait until the first data event is fired
        // then we can run deferreds.
        if(!self.isReady &amp;&amp; event == 'data') {

          // Terminal is now ready and we can
          // avoid having to defer method calls.
          self.isReady = true;

          // Execute all deferred methods
          self.deferreds.forEach(function(fn) {
            // NB! In order to ensure that `this` has all
            // its references updated any variable that
            // need to be available in `this` before
            // the deferred is run has to be declared
            // above this forEach statement.
            fn.run();
          });

          // Reset
          self.deferreds = [];

        }

        // Emit to dummy socket
        self.socket.emit(event, data);

      });
    });

    // Resume socket.
    self.dataPipe.resume();

    // Shutdown if `error` event is emitted.
    self.dataPipe.on('error', function (err) {

      // Close terminal session.
      self._close();

      // EIO, happens when someone closes our child
      // process: the only process in the terminal.
      // node &lt; 0.6.14: errno 5
      // node &gt;= 0.6.14: read EIO
      if (err.code) {
        if (~err.code.indexOf('errno 5') || ~err.code.indexOf('EIO')) return;
      }

      // Throw anything else.
      if (self.listeners('error').length &lt; 2) {
        throw err;
      }

    });

    // Cleanup after the socket is closed.
    self.dataPipe.on('close', function () {
      Terminal.total--;
      self.emit('exit', null);
      self._close();
    });

  });

  this.file = file;
  this.name = name;
  this.cols = cols;
  this.rows = rows;

  this.readable = true;
  this.writable = true;

  Terminal.total++;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pty.js.pty_win.Terminal" id="apidoc.element.pty.js.pty_win.Terminal">
        function <span class="apidocSignatureSpan">pty.js.pty_win.</span>Terminal
        <span class="apidocSignatureSpan">(file, args, opt)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Terminal(file, args, opt) {

  var self = this,
      env, cwd, name, cols, rows, term, agent, debug;

  // Backward compatibility.
  if (typeof args === 'string') {
    opt = {
      name: arguments[1],
      cols: arguments[2],
      rows: arguments[3],
      cwd: process.env.HOME
    };
    args = [];
  }

  // Arguments.
  args = args || [];
  file = file || 'cmd.exe';
  opt = opt || {};

  env = extend({}, opt.env);

  cols = opt.cols || 80;
  rows = opt.rows || 30;
  cwd = opt.cwd || process.cwd();
  name = opt.name || env.TERM || 'Windows Shell';
  debug = opt.debug || false;

  env.TERM = name;

  // Initialize environment variables.
  env = environ(env);

  // If the terminal is ready
  this.isReady = false;

  // Functions that need to run after `ready` event is emitted.
  this.deferreds = [];

  // Create new termal.
  this.agent = new Agent(file, args, env, cwd, cols, rows, debug);

  // The dummy socket is used so that we can defer everything
  // until its available.
  this.socket = this.agent.ptySocket;

  // The terminal socket when its available
  this.dataPipe = null;

  // Not available until `ready` event emitted.
  this.pid = this.agent.pid;
  this.fd = this.agent.fd;
  this.pty = this.agent.pty;

  // The forked windows terminal is not available
  // until `ready` event is emitted.
  this.socket.on('ready_datapipe', function (socket) {

    // Set terminal socket
    self.dataPipe = socket;

    // These events needs to be forwarded.
    ['connect', 'data', 'end', 'timeout', 'drain'].forEach(function(event) {
      self.dataPipe.on(event, function(data) {

        // Wait until the first data event is fired
        // then we can run deferreds.
        if(!self.isReady &amp;&amp; event == 'data') {

          // Terminal is now ready and we can
          // avoid having to defer method calls.
          self.isReady = true;

          // Execute all deferred methods
          self.deferreds.forEach(function(fn) {
            // NB! In order to ensure that `this` has all
            // its references updated any variable that
            // need to be available in `this` before
            // the deferred is run has to be declared
            // above this forEach statement.
            fn.run();
          });

          // Reset
          self.deferreds = [];

        }

        // Emit to dummy socket
        self.socket.emit(event, data);

      });
    });

    // Resume socket.
    self.dataPipe.resume();

    // Shutdown if `error` event is emitted.
    self.dataPipe.on('error', function (err) {

      // Close terminal session.
      self._close();

      // EIO, happens when someone closes our child
      // process: the only process in the terminal.
      // node &lt; 0.6.14: errno 5
      // node &gt;= 0.6.14: read EIO
      if (err.code) {
        if (~err.code.indexOf('errno 5') || ~err.code.indexOf('EIO')) return;
      }

      // Throw anything else.
      if (self.listeners('error').length &lt; 2) {
        throw err;
      }

    });

    // Cleanup after the socket is closed.
    self.dataPipe.on('close', function () {
      Terminal.total--;
      self.emit('exit', null);
      self._close();
    });

  });

  this.file = file;
  this.name = name;
  this.cols = cols;
  this.rows = rows;

  this.readable = true;
  this.writable = true;

  Terminal.total++;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pty.js.pty_win.createTerminal" id="apidoc.element.pty.js.pty_win.createTerminal">
        function <span class="apidocSignatureSpan">pty.js.pty_win.</span>createTerminal
        <span class="apidocSignatureSpan">(file, args, opt)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">createTerminal = function (file, args, opt) {
  return new Terminal(file, args, opt);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pty.js.pty_win.fork" id="apidoc.element.pty.js.pty_win.fork">
        function <span class="apidocSignatureSpan">pty.js.pty_win.</span>fork
        <span class="apidocSignatureSpan">(file, args, opt)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fork = function (file, args, opt) {
  return new Terminal(file, args, opt);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    });
    return;
  }
  self.emit('exit', code, signal);
}

// fork
term = pty.<span class="apidocCodeKeywordSpan">fork</span>(file, args, env, cwd, cols, rows, uid, gid, onexit);

this.socket = TTYStream(term.fd);
this.socket.setEncoding('utf8');

if (opt.resume !== false) {
  this.socket.resume();
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pty.js.pty_win.open" id="apidoc.element.pty.js.pty_win.open">
        function <span class="apidocSignatureSpan">pty.js.pty_win.</span>open
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">open = function () {
  throw new Error("open() not supported on windows, use Fork() instead.");
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

var cols = opt.cols || 80
  , rows = opt.rows || 24
  , term;

// open
term = pty.<span class="apidocCodeKeywordSpan">open</span>(cols, rows);

self.master = TTYStream(term.master);
self.master.setEncoding('utf8');
self.master.resume();

self.slave = TTYStream(term.slave);
self.slave.setEncoding('utf8');
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pty.js.pty_win.spawn" id="apidoc.element.pty.js.pty_win.spawn">
        function <span class="apidocSignatureSpan">pty.js.pty_win.</span>spawn
        <span class="apidocSignatureSpan">(file, args, opt)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">spawn = function (file, args, opt) {
  return new Terminal(file, args, opt);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  you need a program to send you control sequences.

## Example Usage

``` js
var pty = require('pty.js');

var term = pty.<span class="apidocCodeKeywordSpan">spawn</span>('bash', [], {
  name: 'xterm-color',
  cols: 80,
  rows: 30,
  cwd: process.env.HOME,
  env: process.env
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pty.js.pty_win.super_" id="apidoc.element.pty.js.pty_win.super_">
        function <span class="apidocSignatureSpan">pty.js.pty_win.</span>super_
        <span class="apidocSignatureSpan">(file, args, opt)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Terminal(file, args, opt) {
  if (!(this instanceof Terminal)) {
    return new Terminal(file, args, opt);
  }

  var self = this
    , env
    , cwd
    , name
    , cols
    , rows
    , uid
    , gid
    , term;

  // backward compatibility
  if (typeof args === 'string') {
    opt = {
      name: arguments[1],
      cols: arguments[2],
      rows: arguments[3],
      cwd: process.env.HOME
    };
    args = [];
  }

  // for 'close'
  this._internalee = new EventEmitter;

  // arguments
  args = args || [];
  file = file || 'sh';
  opt = opt || {};

  cols = opt.cols || 80;
  rows = opt.rows || 24;

  uid = opt.uid != null ? opt.uid : -1;
  gid = opt.gid != null ? opt.gid : -1;

  opt.env = opt.env || process.env;
  env = extend({}, opt.env);

  if (opt.env === process.env) {
    // Make sure we didn't start our
    // server from inside tmux.
    delete env.TMUX;
    delete env.TMUX_PANE;

    // Make sure we didn't start
    // our server from inside screen.
    // http://web.mit.edu/gnu/doc/html/screen_20.html
    delete env.STY;
    delete env.WINDOW;

    // Delete some variables that
    // might confuse our terminal.
    delete env.WINDOWID;
    delete env.TERMCAP;
    delete env.COLUMNS;
    delete env.LINES;
  }

  // Could set some basic env vars
  // here, if they do not exist:
  // USER, SHELL, HOME, LOGNAME, WINDOWID

  cwd = opt.cwd || process.cwd();
  name = opt.name || env.TERM || 'xterm';
  env.TERM = name;
  // XXX Shouldn't be necessary:
  // env.LINES = rows + '';
  // env.COLUMNS = cols + '';

  env = environ(env);

  function onexit(code, signal) {
    // XXX Sometimes a data event is emitted
    // after exit. Wait til socket is destroyed.
    if (!self._emittedClose) {
      if (self._boundClose) return;
      self._boundClose = true;
      self.once('close', function() {
        self.emit('exit', code, signal);
      });
      return;
    }
    self.emit('exit', code, signal);
  }

  // fork
  term = pty.fork(file, args, env, cwd, cols, rows, uid, gid, onexit);

  this.socket = TTYStream(term.fd);
  this.socket.setEncoding('utf8');

  if (opt.resume !== false) {
    this.socket.resume();
  }

  // setup
  this.socket.on('error', function(err) {
    // NOTE: fs.ReadStream gets EAGAIN twice at first:
    if (err.code) {
      if (~err.code.indexOf('EAGAIN')) return;
    }

    // close
    self._close();
    // EIO on exit from fs.ReadStream:
    if (!self._emittedClose) {
      self._emittedClose = true;
      Terminal.total--;
      self.emit('close');
    }

    // EIO, happens when someone closes our child
    // process: the only process in the terminal.
    // node &lt; 0.6.14: errno 5
    // node &gt;= 0.6.14: read EIO
    if (err.code) {
      if (~err.code.indexOf('errno 5')
          || ~err.code.indexOf('EIO')) return;
    }

    // throw anything else
    if (self.listeners('error').length &lt; 2) {
      throw err;
    }
  });

  this.pid = term.pid;
  this.fd = term.fd;
  this.pty = term.pty;

  this.file = file;
  this.name = name;
  this.cols = cols;
  this.rows = rows;

  this.readable = true;
  this.writable = true;

  Terminal.total++;

  this.socket.on('close', function() {
    if (self._emittedClose) return;
    self._emittedClose = true;
    Terminal.total--;
    self._close();
    self.emit('close');
  });

  env = null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.pty.js.pty_win.prototype" id="apidoc.module.pty.js.pty_win.prototype">module pty.js.pty_win.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.pty.js.pty_win.prototype.destroy" id="apidoc.element.pty.js.pty_win.prototype.destroy">
        function <span class="apidocSignatureSpan">pty.js.pty_win.prototype.</span>destroy
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">destroy = function () {
  defer(this, function() {
    this.kill();
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// Need to close the read stream so
// node stops reading a dead file descriptor.
// Then we can safely SIGHUP the shell.
this.socket.once('close', function() {
  self.kill('SIGHUP');
});

this.socket.<span class="apidocCodeKeywordSpan">destroy</span>();
};

Terminal.prototype.kill = function(sig) {
try {
  process.kill(this.pid, sig || 'SIGHUP');
} catch(e) {
  ;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pty.js.pty_win.prototype.kill" id="apidoc.element.pty.js.pty_win.prototype.kill">
        function <span class="apidocSignatureSpan">pty.js.pty_win.prototype.</span>kill
        <span class="apidocSignatureSpan">(sig)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">kill = function (sig) {
  defer(this, function() {
    if (sig !== undefined) {
      throw new Error("Signals not supported on windows.");
    }
    this._close();
    pty.kill(this.pid);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// close
this._close();

// Need to close the read stream so
// node stops reading a dead file descriptor.
// Then we can safely SIGHUP the shell.
this.socket.once('close', function() {
  self.<span class="apidocCodeKeywordSpan">kill</span>('SIGHUP');
});

this.socket.destroy();
};

Terminal.prototype.kill = function(sig) {
try {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pty.js.pty_win.prototype.resize" id="apidoc.element.pty.js.pty_win.prototype.resize">
        function <span class="apidocSignatureSpan">pty.js.pty_win.prototype.</span>resize
        <span class="apidocSignatureSpan">(cols, rows)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">resize = function (cols, rows) {
  defer(this, function() {

    cols = cols || 80;
    rows = rows || 24;

    this.cols = cols;
    this.rows = rows;

    pty.resize(this.pid, cols, rows);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
});

term.on('data', function(data) {
  console.log(data);
});

term.write('ls\r');
term.<span class="apidocCodeKeywordSpan">resize</span>(100, 40);
term.write('ls /\r');

console.log(term.process);
```

## Todo
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.pty.js.pty_win.prototype.write" id="apidoc.element.pty.js.pty_win.prototype.write">
        function <span class="apidocSignatureSpan">pty.js.pty_win.prototype.</span>write
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">write = function (data) {
  defer(this, function() {
    this.dataPipe.write(data);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  env: process.env
});

term.on('data', function(data) {
  console.log(data);
});

term.<span class="apidocCodeKeywordSpan">write</span>('ls\r');
term.resize(100, 40);
term.write('ls /\r');

console.log(term.process);
```

## Todo
...</pre></li>
    </ul>




</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
</body></html>